## 모노레포 구성 ⭐ 
모노레포를 구성하기 위한 첫번째 단계는 package manger와 모노레포 build system tool을 결정하는 것이다. <br/>
모로레포를 구성하는 방식에는 크게 두가지로 나누어진다. <br/>
1. 모노레포 빌드 시스템 도구 없이 package manager로 구성 
2. 모노레포 빌드 시스템 도구를 같이 사용하는 방식 

### ➡️ 모노레포 빌드 시스템 도구 없이 패키지 매니저로 구성 
npm, yarn, pnpm 모두 workspace라는 기능을 통해 모노레포를 지원한다. <br/>
이를 통해 모든 workspace는 하위 프로젝트를 구성하고 자체적인 종속성 트리를 구성하게 된다. workspace를 통해 완전히 분리된 프로젝트를 만들 수 있게 된다. 

![image (4)](https://github.com/Sueddd/Sueddd/assets/111338578/a4453d79-55d6-454c-83b5-dc901f12154b)

또한 package manager의 다양한 workspace 관련 cli 명령어를 통해 여러 workspace 간의 종속성들을 효율적으로 관리하게 된다. <br/>
패키지 매니저만으로 모노레포를 구성하게 되면 모노레포 빌드 시스템 도구를 사용하여 나타나는 오버헤드를 줄일 수 있게된다. <br/>
하지만, 프로젝트의 규모가 커짐에 따라 빌드 타임을 줄이기 위해 필요한 캐싱, 분산 작업과 같은 구성이 어려워질 수 있다. 

### ➡️ 모노레포 빌드 시스템 도구를 같이 사용하는 방식

- 모노레포 빌드 시스템 도구는 workspace가 점차 성장하고 확장됨에 따라 늘어나는 관리 포인트를 손쉽게 해결해주는 역할을 한다. 
- 변경점에 영향을 받는 프로젝트 빌드 테스트만 실행할 수 있다. 
- 별다른 구성 없이 workspace 또는 프로젝트 간의 의존성 그래프를 쉽게 확인할 수 있게 해준다. 

---

## pnpm❓ 
pnpm의 주요 목표는 효율적인 패키지 설치 및 관리를 제공하는 것이다. <br/>
➡️ pnpm은 패키지를 글로벌 저장소에 한 번만 저장하고, 프로젝트에 필요한 패키지에 대한 심볼릭 링크를 생성한다. 이를 통해 디스크 공간 사용을 최소화하고 중복 패키지 설치를 방지한다. <br/>
➡️ pnpm은 병렬 다운로드 및 심볼릭 링크를 사용해 빠르게 패키지를 설치할 수 있다. 또한 파일 복사를 최소화 하기에 설치 속도가 빠르다. <br/>
➡️ pnpm의 모노레포 설정, 패키지 종속성을 추적하는 방법은 yarn과 유사하다. 
➡️ pnpm은 디스크 공간 및 설치 속도에 중점을 둔 프로젝트에 적합하다. 

## yarn berry❓ 
yarn berry는 모노레포가 거대해졌을 때 빌드 시간을 줄여줄 수 있는 툴이다. <br/>
모노레포의 가장 두드러지는 단점은 레포지토리의 거대화, 느린 CI빌드, 무분별한 의존성이다. 패키지간 의존성 관리는 쉽지만 오히려 과도한 의존성 관계 발생이 가능하다.<br/> 
➡️ 이 때, 느린 빌드 시간을 줄이기 위해 사용되는 yarn berry의 zero-install이 작동하는 방식이다. <br/>
➡️ yarn berry는 node_modules를 생성하지 않는다. 대신 yarn/cache 폴더에 의존성의 정보가 저장되고, .pnp.cjs를 이용하면 디스크 I/O 없이 어떤 패키지가 어떤 라이브러리에 의존하는지, 각 라이브러리는 어디에 위치하는 지 바로 알 수 있다. 

## TurboRepo ❓ 
터보레포의 주요 미션은 모노레포 환경에서 개발자가 더 쉽고 빠르게 개발할 수 있도록 빌드 도구를 제공하는 것이다. 
<br/>
고급 빌드 시스템을 구축하는 복잡한 과정을 터보레포가 대신 해주기 때문에 개발자는 복잡한 설정과 스크립트에 신경 쓰는 대신 개발에 더 집중할 수 있다. <br/>
➡️ 터보레포는 작업 진행을 캐싱에 이미 계산된 내용은 건너 뛴다. 빌드는 딱 한 번만 하는 것을 목표로 한다. <br/>
➡️ 타임스탬프가 아닌 콘텐츠를 인식하는 방식으로 해싱을 지원한다. 이를 통해 모든 파일을 다시 빌드하는 것이 아니라 변경된 파일만 빌드한다. <br/>
➡️ 클라우드 빌드 캐시를 팀원 및 CI/CD와 공유한다. 이를 통해 로컬 환경을 넘어 클라우드 환경에서도 빠른 빌드를 제공한다. <br/>
➡️ 모든 코어를 사용하는 병렬 실행을 목표로 한다. 지정된 테스크 단위로 의존성을 판단해 최대한 병렬적으로 작업을 진행한다. 
<br/>
이런 빌드 도구 도입은 문제시 될 정도로 빌드 타임이 길어지는 게 아니면 오버 엔지니어링이 될 수도 있다. 


